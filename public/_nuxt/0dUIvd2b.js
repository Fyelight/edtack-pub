import{r as f,B as T,g as Q,o as c,c as u,a as n,C as y,v as k,z as C,t as p,F as x,y as P,D as z,q as A}from"./DX4Xkoew.js";import{_ as N}from"./DlAUqK2U.js";const j={class:"pdf-editor flex flex-col md:flex-row"},q={class:"toolbar flex flex-row lg:flex-col space-x-2 lg:space-x-0 lg:space-y-2 p-4 bg-gray-100 border lg:border-r border-gray-300"},O={class:"flex-grow overflow-y-auto h-screen"},X={class:"max-w-4xl mx-auto px-4 py-8"},Y={class:"text-2xl font-bold mb-4"},G={class:"questions-container"},H=["id"],J={class:"text-xl font-semibold mb-2"},K={class:"font-medium mb-2"},Z={key:0,class:"mcq-container"},ee=["id","onUpdate:modelValue","value"],te=["for"],oe={key:0,class:"mt-2 text-green-600"},se={key:1,class:"open-ended-container"},ne=["onUpdate:modelValue"],le={key:0,class:"mt-2 text-green-600"},ae={key:2,class:"drawing-container"},re={class:"text-sm text-gray-600 mb-2"},ie={class:"canvas-container relative border border-gray-300 overflow-hidden",style:{width:"100%",height:"400px"}},de={class:"mt-2"},ce=["onClick"],ue=["onClick"],he={class:"question-nav flex flex-col space-y-2 p-4 bg-gray-100 border-l border-gray-300 sticky top-0 h-screen w-48 overflow-y-auto"},fe=["onClick"],pe={__name:"index-pdf",props:{isChallenge:{type:Boolean,default:!1}},setup(E){const h=f("pen"),m=f("#000000"),w=f(2),D=f({}),v=f({}),g=f([]),$=f(!1),L=f(!1),_=f([{text:"What is the capital of France?",type:"mcq",options:["London","Berlin","Paris","Madrid"],modelAnswer:"Paris"},{text:"Explain the process of photosynthesis.",type:"open_ended",modelAnswer:"Photosynthesis is the process by which green plants convert sunlight into chemical energy..."},{text:"Draw a simple diagram of a cell and label its main parts.",type:"drawing",instructions:"Use the pen tool to draw a cell. Use the arrow tool to label the nucleus, cell membrane, and cytoplasm.",background:{type:"image",url:"/placeholder.svg?height=400&width=600"}},{text:"What is the main function of mitochondria?",type:"mcq",options:["Protein synthesis","Energy production","Cell division","Waste removal"],modelAnswer:"Energy production"},{text:"Describe the water cycle in your own words.",type:"open_ended",modelAnswer:"The water cycle involves evaporation, condensation, and precipitation..."}]);T(()=>{const t=()=>{L.value=window.innerWidth<768};t(),window.addEventListener("resize",t)});function b(t){h.value=t}function B(t){const e=v.value[t];e.getContext("2d").clearRect(0,0,e.width,e.height)}function U(t){const o=v.value[t].toDataURL();g.value[t]=o}async function I(t,e){if(!t.background)return;const{type:o,url:s}=t.background,l=D.value[e],a=v.value[e];o==="image"?await M(s,l,a):o==="pdf"&&await V(s,l,a)}async function M(t,e,o){return new Promise((s,l)=>{const a=new Image;a.onload=()=>{const d=e.getContext("2d");e.width=a.width,e.height=a.height,o.width=a.width,o.height=a.height,d.drawImage(a,0,0),s()},a.onerror=l,a.src=t})}async function V(t,e,o){const s=await PDFDocument.load(await fetch(t).then(r=>r.arrayBuffer())),l=s.getPages()[0],{width:a,height:d}=l.getSize();e.width=a,e.height=d,o.width=a,o.height=d;const i=await s.saveAsBase64({dataUri:!0});await M(i,e,o)}function R(){console.log("Saving all answers:",g.value)}function S(t){let e=!1,o=0,s=0;const l=i=>{e=!0,[o,s]=[i.offsetX,i.offsetY]},a=i=>{if(!e)return;const r=t.getContext("2d");r.strokeStyle=m.value,r.lineWidth=w.value,r.lineCap="round",r.beginPath(),h.value==="pen"?(r.moveTo(o,s),r.lineTo(i.offsetX,i.offsetY),r.stroke(),[o,s]=[i.offsetX,i.offsetY]):h.value==="line"?(r.clearRect(0,0,t.width,t.height),r.moveTo(o,s),r.lineTo(i.offsetX,i.offsetY),r.stroke()):h.value==="arrow"&&(r.clearRect(0,0,t.width,t.height),W(r,o,s,i.offsetX,i.offsetY))},d=()=>{e=!1};t.addEventListener("mousedown",l),t.addEventListener("mousemove",a),t.addEventListener("mouseup",d),t.addEventListener("mouseout",d)}function W(t,e,o,s,l){const d=Math.atan2(l-o,s-e);t.beginPath(),t.moveTo(e,o),t.lineTo(s,l),t.stroke(),t.beginPath(),t.moveTo(s,l),t.lineTo(s-10*Math.cos(d-Math.PI/6),l-10*Math.sin(d-Math.PI/6)),t.lineTo(s-10*Math.cos(d+Math.PI/6),l-10*Math.sin(d+Math.PI/6)),t.closePath(),t.fill()}function F(t){const e=document.getElementById(`question-${t}`);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}return T(()=>{_.value.forEach((t,e)=>{t.type==="drawing"&&(I(t,e),S(v.value[e]))})}),Q([m,w],()=>{Object.values(v.value).forEach(t=>{const e=t.getContext("2d");e.strokeStyle=m.value,e.lineWidth=w.value})}),(t,e)=>(c(),u("div",j,[n("div",q,[n("button",{class:y([{"selected-tool":h.value==="pen"},"tool-button"]),"data-tooltip":"Pen",onClick:e[0]||(e[0]=o=>b("pen"))},e[7]||(e[7]=[n("i",{class:"fas fa-pen"},null,-1)]),2),n("button",{class:y([{"selected-tool":h.value==="line"},"tool-button"]),"data-tooltip":"Line",onClick:e[1]||(e[1]=o=>b("line"))},e[8]||(e[8]=[n("i",{class:"fas fa-minus"},null,-1)]),2),n("button",{class:y([{"selected-tool":h.value==="arrow"},"tool-button"]),"data-tooltip":"Arrow",onClick:e[2]||(e[2]=o=>b("arrow"))},e[9]||(e[9]=[n("i",{class:"fas fa-long-arrow-alt-right"},null,-1)]),2),n("button",{class:y([{"selected-tool":h.value==="protractor"},"tool-button"]),"data-tooltip":"Protractor",onClick:e[3]||(e[3]=o=>b("protractor"))},e[10]||(e[10]=[n("i",{class:"fas fa-circle-notch"},null,-1)]),2),n("button",{class:y([{"selected-tool":h.value==="ruler"},"tool-button"]),"data-tooltip":"Ruler",onClick:e[4]||(e[4]=o=>b("ruler"))},e[11]||(e[11]=[n("i",{class:"fas fa-ruler"},null,-1)]),2),k(n("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>m.value=o),type:"color",class:"w-8 h-8 mt-2",title:"Color picker"},null,512),[[C,m.value]]),k(n("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>w.value=o),type:"range",min:"1",max:"20",class:"w-8 h-20 lg:mt-2 transform -rotate-90",title:"Line width"},null,512),[[C,w.value,void 0,{number:!0}]])]),n("div",O,[n("div",X,[n("h1",Y,p(E.isChallenge?"Challenge":"Problem")+" Editor ",1),n("div",G,[(c(!0),u(x,null,P(_.value,(o,s)=>(c(),u("div",{id:`question-${s+1}`,key:s,class:"question-item mb-8"},[n("h2",J," Question "+p(s+1),1),n("p",K,p(o.text),1),o.type==="mcq"?(c(),u("div",Z,[(c(!0),u(x,null,P(o.options,l=>(c(),u("div",{key:l,class:"flex items-center mb-2"},[k(n("input",{id:`${s}-${l}`,"onUpdate:modelValue":a=>g.value[s]=a,type:"radio",value:l,class:"mr-2"},null,8,ee),[[z,g.value[s]]]),n("label",{for:`${s}-${l}`},p(l),9,te)]))),128)),$.value&&o.modelAnswer?(c(),u("p",oe," Model Answer: "+p(o.modelAnswer),1)):A("",!0)])):o.type==="open_ended"?(c(),u("div",se,[k(n("textarea",{"onUpdate:modelValue":l=>g.value[s]=l,rows:"4",class:"w-full p-2 border rounded"},null,8,ne),[[C,g.value[s]]]),$.value&&o.modelAnswer?(c(),u("p",le," Model Answer: "+p(o.modelAnswer),1)):A("",!0)])):o.type==="drawing"?(c(),u("div",ae,[n("p",re,p(o.instructions),1),n("div",ie,[n("canvas",{ref_for:!0,ref:l=>{l&&(D.value[s]=l)},class:"background-canvas absolute top-0 left-0"},null,512),n("canvas",{ref_for:!0,ref:l=>{l&&(v.value[s]=l)},class:"drawing-canvas absolute top-0 left-0"},null,512)]),n("div",de,[n("button",{class:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 mr-2",onClick:l=>B(s)}," Clear Canvas ",8,ce),n("button",{class:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",onClick:l=>U(s)}," Save Drawing ",8,ue)])])):A("",!0)],8,H))),128))]),n("button",{class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",onClick:R}," Save All Answers ")])]),n("div",he,[e[12]||(e[12]=n("h3",{class:"font-semibold mb-2"}," Questions ",-1)),(c(!0),u(x,null,P(_.value,(o,s)=>(c(),u("button",{key:s,class:"text-left px-2 py-1 rounded hover:bg-gray-200",onClick:l=>F(s+1)},p(L.value?`Q. ${s+1}`:`Question ${s+1}`),9,fe))),128))])]))}},me=N(pe,[["__scopeId","data-v-394c788b"]]);export{me as default};
